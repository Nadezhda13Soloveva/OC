# Отчет по лабораторной работе № 2
## по курсу "Операционные системы"

Студент группы М8О-208Б-23 Соловьева Надежда Сергеевна

Работа выполнена 

Преподаватель: Егор Живалев

1. **Тема**: Потоки  
2. **Цель работы**:  
   - Научиться управленять потоками в ОС  
   - Научиться обеспечивать синхронизацию между потоками  
   
3. **Задание**:  Составить программу на языке Си, обрабатывающую данные в многопоточном режиме. При обработки использовать стандартные средства создания потоков операционной системы (Windows/Unix). Ограничение максимального количества потоков, работающих в один момент времени, должно быть задано ключом запуска вашей программы.  
Так же необходимо уметь продемонстрировать количество потоков, используемое вашей программой с помощью стандартных средств операционной системы.  

   Вариант 13: *"Наложить K раз фильтр, использующий матрицу свертки, на матрицу, состоящую из вещественных чисел. Размер окна задается пользователем."*  
4. **Код решения**: [lab2](main.c) 
5. **Тестовые данные**: [test](../tests/test2.cpp)  
6. **Анализ:** Исследуя зависимоть ускорения и эффективности алгоритма от входных данных и количества потоков на примере M = 1000, N = 4, K = 100, можно сделать вывод, что максимальное количество потоков не является оптимальным для данного алгоритма (да и в целом это так). На графике отчетливо видно, что наиболее быстрым оказался случай при 5 потоках с временем выполнения всего 1,28015 секунды.  
<image src="analysis.png" alt="Зависимость ускорения и эффективности алгоритма от входных данных и количества потоков">  
Также стоит отметить, что график не обладает единым трендом, постоянно то понижаясь, то повышаясь. Проанализировав реализацию алгоритма свертки, могу выдвинуть предположение, что колебания графика зависят от остатка потоков (numCells % usedThreads, где numCells = (M - N + 1) ^ 2), который переходит к последнему потоку. Из-за остатка потоков время работы последнего потока может превышать время работы предыдущих, что порождает изменяющееся от случая ожидание.  

7. **Вывод:** В процессе выполнения лабораторной работы научились работать с потоками, узнали об инструкментах синхронизации потоков (mutex, semaphore, barrier, ...). Кроме основных знаний, относящихся к данной теме, также узнали об алгоритме свертки матриц. Личная оценка: 8/10.